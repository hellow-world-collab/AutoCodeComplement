# 更新日志 | Changelog

所有重要的项目变更都会记录在此文件中。

---

## [1.0-SNAPSHOT] - 2025-10-21

### 新增功能 ✨

#### 核心功能
- ✅ **智能代码补全** (Shift + Alt + A)
  - 实时代码补全建议
  - Tab 键快速接受
  - 灰色内联文本显示
  - 可配置触发延迟

- ✅ **代码分析与优化** (Shift + Alt + 1)
  - AI 驱动的代码优化建议
  - 专业的 Diff 对比视图
  - 模态对话框防止误操作
  - 支持快捷键应用修改 (Shift + Alt + 2)

- ✅ **智能代码注释** (Shift + Alt + 3)
  - 自动生成专业注释
  - 理解代码上下文
  - Diff 对比查看效果

#### 性能优化
- ✅ **智能缓存系统**
  - 两级 LRU 缓存（主缓存 + 会话缓存）
  - 基于上下文的智能键生成
  - 60 秒 TTL，自动过期
  - 最大缓存 100 条记录

- ✅ **请求管理**
  - 自动取消过期的 API 请求
  - HTTP 连接池复用
  - 后台线程异步处理

#### 用户体验
- ✅ **模态对话框保护**
  - 查看 Diff 时自动锁定编辑器
  - 防止意外编辑
  - 关闭对话框自动恢复

- ✅ **智能内容清理**
  - 自动去除 Markdown 代码块标记
  - 清理多余空白字符

- ✅ **配置界面**
  - Settings → AI Code Completion
  - 可配置 API URL、Key、Model
  - 可调整触发延迟和建议长度
  - 配置持久化存储

### 技术特性 🔧

#### 基础架构
- Java 8 兼容
- Gradle 8.7 构建系统
- 支持 PyCharm 2019.3.5 (Build 193.*)

#### 依赖库
- OkHttp 4.12.0 - HTTP 客户端
- org.json 20240303 - JSON 处理
- java-diff-utils 4.12 - 差异对比

#### 网络配置
- 内置 HTTP 代理支持 (127.0.0.1:7897)
- 5 秒连接超时
- 10 秒读写超时
- 连接池优化

### 支持的 API 🌐

- ✅ OpenAI GPT 系列
- ✅ Azure OpenAI
- ✅ 其他兼容 OpenAI API 格式的服务
  - OneAPI
  - 本地部署的大模型
  - 自定义 API 服务

### 文档 📚

#### 新增文档
- ✅ README.md - 项目概述（中英双语）
- ✅ USAGE.md - 详细使用说明
- ✅ PROJECT_SUMMARY.md - 项目总结
- ✅ QUICK_REFERENCE.md - 快速参考卡片
- ✅ ARCHITECTURE.md - 架构设计文档
- ✅ CHANGELOG.md - 更新日志

#### 文档亮点
- 中英双语支持
- 详细的架构图
- 完整的数据流说明
- 丰富的使用示例
- 故障排查指南

### 已知限制 ⚠️

1. 仅支持 PyCharm 2019.3.5 (build 193.*)
2. 需要网络连接访问 LLM API
3. 补全质量依赖于 API 响应速度和模型能力
4. 设置修改后需要重启 IDE 才能生效
5. 默认使用 HTTP 代理 127.0.0.1:7897（需要时可在代码中修改）

### 快捷键总览 ⌨️

| 快捷键 | 功能 |
|-------|------|
| Shift + Alt + A | 开启/关闭 AI 代码补全 |
| Tab | 接受代码补全建议 |
| Shift + Alt + 1 | 分析和优化选中代码 |
| Shift + Alt + 3 | 为选中代码添加注释 |
| Shift + Alt + 2 | 应用 AI 修改建议 |

### 默认配置 ⚙️

| 配置项 | 默认值 |
|-------|--------|
| API URL | https://api.openai.com/v1/chat/completions |
| Model | gpt-4o-mini |
| 触发延迟 | 500ms |
| 最大建议长度 | 150 字符 |
| 缓存 TTL | 60 秒 |
| 缓存容量 | 100 条 |

---

## 未来计划 🚀

### v1.1 计划
- [ ] 支持更多 IDE 版本
- [ ] 可配置的代理设置（UI 界面）
- [ ] 持久化缓存（保存到磁盘）
- [ ] 补全历史记录

### v1.2 计划
- [ ] 支持多种补全策略（单行/多行/函数）
- [ ] 自定义快捷键
- [ ] API 调用统计和成本分析
- [ ] 增量补全（逐字显示）

### v2.0 计划
- [ ] 多光标补全支持
- [ ] 更多代码操作（重构、解释、测试生成）
- [ ] 代码质量检查
- [ ] 团队协作功能

---

## 如何贡献

本项目目前为个人学习项目，暂不接受外部贡献。

---

## 许可证

本项目仅供学习和个人使用。

---

## 联系方式

- **Email**: 3472237739@qq.com

---

**构建状态**: ✅ 成功  
**插件包**: `build/distributions/demo-1.0-SNAPSHOT.zip`  
**最后更新**: 2025-10-21
